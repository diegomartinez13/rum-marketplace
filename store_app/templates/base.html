{% load static %}

<!DOCTYPE html>
<html lang="en" data-bs-theme="light">

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-QTZNVRESGN"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-QTZNVRESGN');
  </script>

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7946045188653475"
    crossorigin="anonymous"></script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <title>RUM Marketplace</title>
  <!-- Favicon-->
  <link rel="icon" type="image/x-icon" href="{% static 'assets/favicon.ico' %}" />
  <!-- Bootstrap icons-->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
  <!-- Core theme CSS (includes Bootstrap)-->
  <!-- <link href="{% static 'css/styles.css' %}?v=1" rel="stylesheet" /> -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>

<body style="background-color: ghostwhite; display: flex; flex-direction: column; min-height: 100vh;">
  <!-- Navigation-->
  <nav class="navbar navbar-expand-lg bg-success navbar-dark swadow-sm sticky-top">
    <div class="container-fluid">
      <!-- Brand Logo -->
      <a class="navbar-brand d-flex align-items-center" href="{% url 'store_app:home' %}">
        <img src="{% static 'assets/logo.jpeg' %}" alt="RUM Marketplace Logo" width="50" height="50">
        <p class="m-2" style="font-size: 1.8rem;">RUM Marketplace</p>
      </a>

      <!-- Navbar Toggler -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span
          class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link active fs-5" aria-current="page" href="{% url 'store_app:home' %}">HOME</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle fs-5" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              CATEGORIES
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="{% url 'store_app:all_products' %}">All Products</a></li>
              <li><a class="dropdown-item" href="{% url 'store_app:all_services' %}">All Services</a></li>
              <li>
                <hr class="dropdown-divider" />
              </li>
              <li>
                <p class="dropdown-header">Products</p>
              </li>
              {% if products_categories %}
              {% for category in products_categories %}
              <li><a class="dropdown-item" href="{% url 'store_app:all_products' %}?category={{ category.slug }}">{{ category.name }}</a></li>
              {% endfor %}
              {% endif %}
              <li>
                <hr class="dropdown-divider" />
              </li>
              <li>
                <p class="dropdown-header">Services</p>
              </li>
              {% if services_categories %}
              {% for category in services_categories %}
              <li><a class="dropdown-item" href="{% url 'store_app:all_services' %}?category={{ category.slug }}">{{ category.name }}</a></li>
              {% endfor %}
              {% endif %}
              <li>
                <hr class="dropdown-divider" />
              </li>
              <li><a class="dropdown-item" href="#!">Popular Items</a></li>
              <li><a class="dropdown-item" href="#!">New Arrivals</a></li>
            </ul>
          </li>
        </ul>
        <!-- Search Bar -->
        <form class="d-flex mx-3" style="flex: 1; max-width: 400px;" action="{% url 'store_app:search' %}" method="GET">
          <input class="form-control me-2" type="search" placeholder="Search products..." aria-label="Search" name="q"
            value="{{ query|default:'' }}">
          <button class="btn btn-light text-bg-color-primary" type="submit">
            <i class="bi bi-search"></i>
          </button>
        </form>
        {% if user.is_authenticated %}
        <!-- Cart Button -->
        <div class="d-flex mx-3">
          <button class="btn btn-primary" type="submit">
            <i class="bi-cart-fill me-1"></i>
            Cart
            <span class="badge bg-dark text-white ms-1 rounded-pill">0</span>
          </button>
        </div>
        {% endif %}
        {% if user.is_authenticated %}
        <!-- User Dropdown -->
        <div class="d-flex">
          <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="userMenuButton"
              data-bs-toggle="dropdown" aria-expanded="false">
              <i class="bi bi-person-circle me-1"></i>
              {{ user.username }}
            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userMenuButton">
              <li><a class="dropdown-item" href="{% url 'store_app:profile' %}">Profile</a></li>
              <li><a class="dropdown-item" href="">Orders</a></li>
              <li>
                <hr class="dropdown-divider">
              </li>
              <li><a class="dropdown-item text-danger" href="{% url 'store_app:logout' %}">Logout</a></li>
            </ul>
          </div>
        </div>
        {% endif %}
        {% if not user.is_authenticated %}
        <!-- Log in Button -->
        <div class="d-flex">
          <a href="{% url 'store_app:login' %}" class="btn btn-warning">
            <i class="bi bi-box-arrow-in-right me-1"></i>
            Login
          </a>
        </div>
        {% endif %}
      </div>
    </div>
  </nav>

  <div class="container-fluid mt-4" style="flex: 1;">
    {% block content %}
    {% endblock %}
  </div>


  <!-- Footer-->
  <footer class=" py-5 bg-success">
    <div class="container-fluid align-items-center justify-content-center">
      <p class="m-0 text-center text-white">Copyright &copy;rummarketplace.com 2025</p>
    </div>
  </footer>
  <!-- Bootstrap core JS-->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Core theme JS-->
  <script src="{% static 'js/scripts.js' %}"></script>
</body>

</html>
